"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.chooseNodeUrl = exports.normalizeNodeUrl = exports.validateNodeUrl = exports.SUBGRAPH_STUDIO_URL = void 0;
const url_1 = require("url");
const gluegun_1 = require("gluegun");
exports.SUBGRAPH_STUDIO_URL = 'https://api.studio.thegraph.com/deploy/';
const validateNodeUrl = (node) => new url_1.URL(node);
exports.validateNodeUrl = validateNodeUrl;
const normalizeNodeUrl = (node) => new url_1.URL(node).toString();
exports.normalizeNodeUrl = normalizeNodeUrl;
function chooseNodeUrl({ node }) {
    if (node) {
        try {
            (0, exports.validateNodeUrl)(node);
            return { node };
        }
        catch (e) {
            gluegun_1.print.error(`Graph node "${node}" is invalid: ${e.message}`);
            process.exit(1);
        }
    }
    return { node: exports.SUBGRAPH_STUDIO_URL };
}
exports.chooseNodeUrl = chooseNodeUrl;
